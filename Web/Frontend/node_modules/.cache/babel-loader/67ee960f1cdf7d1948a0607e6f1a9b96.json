{"ast":null,"code":"var _jsxFileName = \"E:\\\\Academic\\\\5th Sem\\\\Project\\\\RTS\\\\client\\\\src\\\\components\\\\mainpages\\\\customer\\\\Customer.js\";\nimport React, { useContext, useState, useEffect } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport { GlobalState } from '../../../GlobalState';\nimport axios from 'axios';\nconst initialState = {\n  Id: '',\n  name: '',\n  phone: '',\n  address1: '',\n  address2: '',\n  address3: '',\n  deposit: 0,\n  balance: 0\n};\n\nfunction Customer() {\n  const params = useParams();\n  const state = useContext(GlobalState);\n  const [customer, setCustomer] = useState(initialState);\n  const [token] = state.token;\n  const [callback, setCallback] = state.customerAPI.callback;\n  const [onEdit, setOnEdit] = useState(false);\n  const [isAdmin] = state.userAPI.isAdmin;\n  useEffect(() => {\n    if (params.Id) {\n      setOnEdit(true);\n\n      const getCustomer = async () => {\n        const res = await axios.get(`/api/customer/${params.Id}`, {\n          headers: {\n            Authorization: token\n          }\n        });\n        setCustomer(res.data);\n        console.log(res.data);\n      };\n\n      getCustomer();\n    } else {\n      setOnEdit(false);\n      setCustomer(initialState);\n    }\n  }, [callback]);\n\n  const handleChangeInputData = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setCustomer({ ...customer,\n      [name]: value.toLowerCare()\n    });\n  };\n\n  const handleChangeInput = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setCustomer({ ...customer,\n      [name]: value\n    });\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    try {\n      if (!isAdmin) return alert(\"You're not an admin!\");\n\n      if (onEdit) {\n        await axios.put(`/api/customer/update/${customer.Id}`, { ...customer\n        }, {\n          headers: {\n            Authorization: token\n          }\n        });\n      } else {\n        await axios.post(`/api/customer/register`, { ...customer\n        }, {\n          headers: {\n            Authorization: token\n          }\n        });\n      }\n\n      setCallback(!callback);\n    } catch (err) {\n      alert(err.response.data.msg);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create_product\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"upload\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    name: \"file\",\n    id: \"file_up\",\n    onChange: handleUpload,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }\n  }), loading ? /*#__PURE__*/React.createElement(\"div\", {\n    id: \"file_img\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(Loading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 46\n    }\n  })) : /*#__PURE__*/React.createElement(\"div\", {\n    id: \"file_img\",\n    style: styleUpload,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 18\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: images ? images.url : '',\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    onClick: handleDestroy,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 21\n    }\n  }, \"X\"))), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"Id\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 17\n    }\n  }, \"User ID\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"Id\",\n    id: \"Id\",\n    required: true,\n    value: customer.product_id,\n    onChange: handleChangeInputData,\n    disabled: onEdit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 17\n    }\n  }, \"Title\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"title\",\n    id: \"title\",\n    required: true,\n    value: product.title,\n    onChange: handleChangeInput,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"price\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 17\n    }\n  }, \"Price\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"number\",\n    name: \"price\",\n    id: \"price\",\n    required: true,\n    value: product.price,\n    onChange: handleChangeInput,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"description\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 17\n    }\n  }, \"Description\"), /*#__PURE__*/React.createElement(\"textarea\", {\n    type: \"text\",\n    name: \"description\",\n    id: \"description\",\n    required: true,\n    value: product.description,\n    rows: \"5\",\n    onChange: handleChangeInput,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 17\n    }\n  }, \"Content\"), /*#__PURE__*/React.createElement(\"textarea\", {\n    type: \"text\",\n    name: \"content\",\n    id: \"content\",\n    required: true,\n    value: product.content,\n    rows: \"7\",\n    onChange: handleChangeInput,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"categories\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 17\n    }\n  }, \"Categories: \"), /*#__PURE__*/React.createElement(\"select\", {\n    name: \"category\",\n    value: product.category,\n    onChange: handleChangeInput,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 21\n    }\n  }, \"Please select a category\"), categories.map(category => /*#__PURE__*/React.createElement(\"option\", {\n    value: category._id,\n    key: category._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 29\n    }\n  }, category.name)))), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 13\n    }\n  }, onEdit ? \"Update\" : \"Create\")));\n}\n\nexport default Customer;","map":{"version":3,"sources":["E:/Academic/5th Sem/Project/RTS/client/src/components/mainpages/customer/Customer.js"],"names":["React","useContext","useState","useEffect","useParams","Link","GlobalState","axios","initialState","Id","name","phone","address1","address2","address3","deposit","balance","Customer","params","state","customer","setCustomer","token","callback","setCallback","customerAPI","onEdit","setOnEdit","isAdmin","userAPI","getCustomer","res","get","headers","Authorization","data","console","log","handleChangeInputData","e","value","target","toLowerCare","handleChangeInput","handleSubmit","preventDefault","alert","put","post","err","response","msg","handleUpload","loading","styleUpload","images","url","handleDestroy","product_id","product","title","price","description","content","category","categories","map","_id"],"mappings":"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","sourcesContent":["import React, {useContext, useState, useEffect} from 'react'\r\nimport {useParams, Link} from 'react-router-dom'\r\nimport {GlobalState} from '../../../GlobalState'\r\nimport axios from 'axios'\r\n\r\nconst initialState = {\r\n    Id: '',\r\n    name: '',\r\n    phone: '',\r\n    address1: '',\r\n    address2: '',\r\n    address3: '',\r\n    deposit: 0,\r\n    balance: 0\r\n}\r\n\r\n\r\nfunction Customer() {\r\n    const params = useParams()\r\n    const state = useContext(GlobalState)\r\n    const [customer, setCustomer] = useState(initialState)\r\n    const [token] = state.token\r\n    const [callback, setCallback] = state.customerAPI.callback\r\n    const [onEdit, setOnEdit] = useState(false)\r\n    const [isAdmin] = state.userAPI.isAdmin\r\n\r\n    useEffect(() => {\r\n        if(params.Id){\r\n            setOnEdit(true)\r\n            const getCustomer = async () =>{\r\n                const res = await axios.get(`/api/customer/${params.Id}`,{\r\n                    headers: {Authorization: token} \r\n                })\r\n                setCustomer(res.data)\r\n                console.log(res.data)\r\n            }\r\n            getCustomer()\r\n        }else{\r\n            setOnEdit(false)\r\n            setCustomer(initialState)\r\n        }\r\n    },[callback])\r\n\r\n    const handleChangeInputData = e =>{\r\n        const {name, value} = e.target\r\n        setCustomer({...customer, [name]: value.toLowerCare()})\r\n    }\r\n\r\n    const handleChangeInput = e =>{\r\n        const {name, value} = e.target\r\n        setCustomer({...customer, [name]: value})\r\n    }\r\n\r\n    const handleSubmit = async e =>{\r\n        e.preventDefault()\r\n        try{\r\n            if(!isAdmin) return alert(\"You're not an admin!\")\r\n\r\n            if(onEdit){\r\n                await axios.put(`/api/customer/update/${customer.Id}`,{...customer},{\r\n                    headers: {Authorization: token}\r\n                })\r\n            }else{\r\n                await axios.post(`/api/customer/register`,{...customer},{\r\n                    headers: {Authorization: token}\r\n                })\r\n            }\r\n            setCallback(!callback)\r\n        }catch(err){\r\n            alert(err.response.data.msg)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"create_product\">\r\n        <div className=\"upload\">\r\n            <input type=\"file\" name=\"file\" id=\"file_up\" onChange={handleUpload}/>\r\n            {\r\n                loading ? <div id=\"file_img\"><Loading /></div>\r\n\r\n                :<div id=\"file_img\" style={styleUpload}>\r\n                    <img src={images ? images.url : ''} alt=\"\"/>\r\n                    <span onClick={handleDestroy}>X</span>\r\n                </div>\r\n            }\r\n            \r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit}>\r\n            <div className=\"row\">\r\n                <label htmlFor=\"Id\">User ID</label>\r\n                <input type=\"text\" name=\"Id\" id=\"Id\" required\r\n                value={customer.product_id} onChange={handleChangeInputData} disabled={onEdit} />\r\n            </div>\r\n\r\n            <div className=\"row\">\r\n                <label htmlFor=\"title\">Title</label>\r\n                <input type=\"text\" name=\"title\" id=\"title\" required\r\n                value={product.title} onChange={handleChangeInput} />\r\n            </div>\r\n\r\n            <div className=\"row\">\r\n                <label htmlFor=\"price\">Price</label>\r\n                <input type=\"number\" name=\"price\" id=\"price\" required\r\n                value={product.price} onChange={handleChangeInput} />\r\n            </div>\r\n\r\n            <div className=\"row\">\r\n                <label htmlFor=\"description\">Description</label>\r\n                <textarea type=\"text\" name=\"description\" id=\"description\" required\r\n                value={product.description} rows=\"5\" onChange={handleChangeInput} />\r\n            </div>\r\n\r\n            <div className=\"row\">\r\n                <label htmlFor=\"content\">Content</label>\r\n                <textarea type=\"text\" name=\"content\" id=\"content\" required\r\n                value={product.content} rows=\"7\" onChange={handleChangeInput} />\r\n            </div>\r\n\r\n            <div className=\"row\">\r\n                <label htmlFor=\"categories\">Categories: </label>\r\n                <select name=\"category\" value={product.category} onChange={handleChangeInput} >\r\n                    <option value=\"\">Please select a category</option>\r\n                    {\r\n                        categories.map(category => (\r\n                            <option value={category._id} key={category._id}>\r\n                                {category.name}\r\n                            </option>\r\n                        ))\r\n                    }\r\n                </select>\r\n            </div>\r\n\r\n            <button type=\"submit\">{onEdit? \"Update\" : \"Create\"}</button>\r\n        </form>\r\n    </div>\r\n    )\r\n}\r\n\r\nexport default Customer\r\n"]},"metadata":{},"sourceType":"module"}