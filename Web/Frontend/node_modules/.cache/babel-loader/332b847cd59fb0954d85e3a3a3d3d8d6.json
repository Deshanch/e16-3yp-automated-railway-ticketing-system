{"ast":null,"code":"var _jsxFileName = \"E:\\\\Academic\\\\5th Sem\\\\Project\\\\RTS\\\\client\\\\src\\\\components\\\\mainpages\\\\customer\\\\Customer.js\";\nimport React, { useContext, useState, useEffect } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport { GlobalState } from '../../../GlobalState';\nimport axios from 'axios';\nconst initialState = {\n  Id: '',\n  name: '',\n  address1: '',\n  address2: '',\n  address3: '',\n  phone: '',\n  balance: 0,\n  deposit: 0\n};\n\nfunction Customer() {\n  const params = useParams();\n  const state = useContext(GlobalState);\n  const [customer, setCustomer] = useState(initialState);\n  const [token] = state.token;\n  const [callback, setCallback] = state.customerAPI.callback;\n  const [onEdit, setOnEdit] = useState(false);\n  const [isAdmin] = state.userAPI.isAdmin;\n  useEffect(() => {\n    if (params.Id) {\n      setOnEdit(true);\n\n      const getCustomer = async () => {\n        const res = await axios.get(`/api/customer/${params.Id}`, {\n          headers: {\n            Authorization: token\n          }\n        });\n        setCustomer(res.data);\n        console.log(res.data);\n      };\n\n      getCustomer();\n    } else {\n      setOnEdit(false);\n      setCustomer(initialState);\n    }\n  }, [callback]);\n\n  const handleChangeInputData = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setCustomer({ ...customer,\n      [name]: value\n    });\n  };\n\n  const handleChangeInput = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setCustomer({ ...customer,\n      [name]: value.toLowerCase()\n    });\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    try {\n      if (!isAdmin) return alert(\"You're not an admin!\");\n\n      if (onEdit) {\n        await axios.put(`/api/customer/update/${customer.Id}`, { ...customer\n        }, {\n          headers: {\n            Authorization: token\n          }\n        });\n      } else {\n        await axios.post(`/api/customer/register`, { ...customer\n        }, {\n          headers: {\n            Authorization: token\n          }\n        });\n      }\n\n      setCallback(!callback);\n    } catch (err) {\n      alert(err.response.data.msg);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create_product\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"Id\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 17\n    }\n  }, \"User ID\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"Id\",\n    id: \"Id\",\n    required: true,\n    value: customer.Id,\n    onChange: handleChangeInputData,\n    disabled: onEdit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 17\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"name\",\n    id: \"name\",\n    required: true,\n    value: customer.name,\n    onChange: handleChangeInput,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"balance\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 17\n    }\n  }, \"Balance\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"number\",\n    name: \"balance\",\n    id: \"balance\",\n    required: true,\n    value: customer.balance,\n    onChange: handleChangeInput,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"deposit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 17\n    }\n  }, \"Deposit\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"number\",\n    name: \"deposit\",\n    id: \"deposit\",\n    required: true,\n    onChange: handleChangeInput,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  }, onEdit ? \"Update\" : \"Create\")));\n}\n\nexport default Customer;","map":{"version":3,"sources":["E:/Academic/5th Sem/Project/RTS/client/src/components/mainpages/customer/Customer.js"],"names":["React","useContext","useState","useEffect","useParams","Link","GlobalState","axios","initialState","Id","name","address1","address2","address3","phone","balance","deposit","Customer","params","state","customer","setCustomer","token","callback","setCallback","customerAPI","onEdit","setOnEdit","isAdmin","userAPI","getCustomer","res","get","headers","Authorization","data","console","log","handleChangeInputData","e","value","target","handleChangeInput","toLowerCase","handleSubmit","preventDefault","alert","put","post","err","response","msg"],"mappings":"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","sourcesContent":["import React, {useContext, useState, useEffect} from 'react'\r\nimport {useParams, Link} from 'react-router-dom'\r\nimport {GlobalState} from '../../../GlobalState'\r\nimport axios from 'axios'\r\n\r\nconst initialState = {\r\n    Id: '',\r\n    name: '',\r\n    address1: '',\r\n    address2: '',\r\n    address3: '',\r\n    phone: '',\r\n    balance: 0,\r\n    deposit: 0\r\n}\r\n\r\n\r\nfunction Customer() {\r\n    const params = useParams()\r\n    const state = useContext(GlobalState)\r\n    const [customer, setCustomer] = useState(initialState)\r\n    const [token] = state.token\r\n    const [callback, setCallback] = state.customerAPI.callback\r\n    const [onEdit, setOnEdit] = useState(false)\r\n    const [isAdmin] = state.userAPI.isAdmin\r\n\r\n    useEffect(() => {\r\n        if(params.Id){\r\n            setOnEdit(true)\r\n            const getCustomer = async () =>{\r\n                const res = await axios.get(`/api/customer/${params.Id}`,{\r\n                    headers: {Authorization: token} \r\n                })\r\n                setCustomer(res.data)\r\n                console.log(res.data)\r\n            }\r\n            getCustomer()\r\n        }else{\r\n            setOnEdit(false)\r\n            setCustomer(initialState)\r\n        }\r\n    },[callback])\r\n\r\n    const handleChangeInputData = e =>{\r\n        const {name, value} = e.target\r\n        setCustomer({...customer, [name]: value})\r\n    }\r\n\r\n    const handleChangeInput = e =>{\r\n        const {name, value} = e.target\r\n        setCustomer({...customer, [name]: value.toLowerCase()})\r\n    }\r\n\r\n    const handleSubmit = async e =>{\r\n        e.preventDefault()\r\n        try{\r\n            if(!isAdmin) return alert(\"You're not an admin!\")\r\n\r\n            if(onEdit){\r\n                await axios.put(`/api/customer/update/${customer.Id}`,{...customer},{\r\n                    headers: {Authorization: token}\r\n                })\r\n            }else{\r\n                await axios.post(`/api/customer/register`,{...customer},{\r\n                    headers: {Authorization: token}\r\n                })\r\n            }\r\n            setCallback(!callback)\r\n        }catch(err){\r\n            alert(err.response.data.msg)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"create_product\">\r\n\r\n        <form onSubmit={handleSubmit}>\r\n            <div className=\"row\">\r\n                <label htmlFor=\"Id\">User ID</label>\r\n                <input type=\"text\" name=\"Id\" id=\"Id\" required\r\n                value={customer.Id} onChange={handleChangeInputData} disabled={onEdit} />\r\n            </div>\r\n\r\n            <div className=\"row\">\r\n                <label htmlFor=\"name\">Name</label>\r\n                <input type=\"text\" name=\"name\" id=\"name\" required\r\n                value={customer.name} onChange={handleChangeInput} />\r\n            </div>\r\n\r\n            <div className=\"row\">\r\n                <label htmlFor=\"balance\">Balance</label>\r\n                <input type=\"number\" name=\"balance\" id=\"balance\" required\r\n                value={customer.balance} onChange={handleChangeInput} />\r\n            </div>\r\n\r\n            <div className=\"row\">\r\n                <label htmlFor=\"deposit\">Deposit</label>\r\n                <input type=\"number\" name=\"deposit\" id=\"deposit\" required\r\n                onChange={handleChangeInput} />\r\n            </div>\r\n\r\n            <button type=\"submit\">{onEdit? \"Update\" : \"Create\"}</button>\r\n        </form>\r\n    </div>\r\n    )\r\n}\r\n\r\nexport default Customer\r\n"]},"metadata":{},"sourceType":"module"}