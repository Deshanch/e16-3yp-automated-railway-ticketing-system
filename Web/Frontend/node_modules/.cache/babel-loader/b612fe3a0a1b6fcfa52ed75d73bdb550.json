{"ast":null,"code":"var _jsxFileName = \"E:\\\\Academic\\\\5th Sem\\\\Project\\\\RTS\\\\client\\\\src\\\\components\\\\mainpages\\\\customer\\\\Customer.js\";\nimport React, { useContext, useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { GlobalState } from '../../../GlobalState';\nimport axios from 'axios';\nimport Loading from '../utils/Loading/Loading';\nimport Footer from '../../footers/Footer';\nimport '../../../bootstrap.css';\nconst initialState = {\n  Id: '',\n  name: '',\n  address1: '',\n  address2: '',\n  address3: '',\n  phone: '',\n  balance: 0,\n  deposit: 0\n};\n\nfunction Customer() {\n  const params = useParams();\n  const state = useContext(GlobalState);\n  const [customer, setCustomer] = useState(initialState);\n  const [token] = state.token;\n  const [callback, setCallback] = state.customerAPI.callback;\n  const [onEdit, setOnEdit] = useState(false);\n  const [isAdmin] = state.userAPI.isAdmin;\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    if (params.Id) {\n      setOnEdit(true);\n\n      const getCustomer = async () => {\n        const res = await axios.get(`/api/customer/${params.Id}`, {\n          headers: {\n            Authorization: token\n          }\n        });\n        setCustomer(res.data);\n        console.log(res.data);\n      };\n\n      getCustomer();\n    } else {\n      setOnEdit(false);\n      setCustomer(initialState);\n    }\n  }, [callback]);\n\n  const handleChangeInputData = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setCustomer({ ...customer,\n      [name]: value\n    });\n  };\n\n  const handleChangeInputNumber = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setCustomer({ ...customer,\n      [name]: parseInt(value)\n    });\n  };\n\n  const handleChangeInput = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setCustomer({ ...customer,\n      [name]: value.toLowerCase()\n    });\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    try {\n      if (!isAdmin) return alert(\"You're not an admin!\");\n\n      if (onEdit) {\n        const res = await axios.put(`/api/customer/update/${customer.Id}`, { ...customer\n        }, {\n          headers: {\n            Authorization: token\n          }\n        });\n        alert(res.data.msg);\n      } else {\n        const res = await axios.post(`/api/customer/register`, { ...customer\n        }, {\n          headers: {\n            Authorization: token\n          }\n        });\n        alert(res.data.msg);\n      }\n\n      setCallback(!callback);\n    } catch (err) {\n      alert(err.response.data.msg);\n    }\n  };\n\n  if (loading) return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 24\n    }\n  }, /*#__PURE__*/React.createElement(Loading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 29\n    }\n  }));\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"container mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group row justify-content-center align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"Id\",\n    class: \"col-md-2 col-form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 21\n    }\n  }, \"User ID\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"Id\",\n    id: \"Id\",\n    required: true,\n    class: \"col-md-4\",\n    value: customer.Id,\n    onChange: handleChangeInputData,\n    disabled: onEdit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group row justify-content-center align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"name\",\n    class: \"col-md-2 col-form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 21\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"name\",\n    id: \"name\",\n    required: true,\n    class: \"col-md-4\",\n    value: customer.name,\n    onChange: handleChangeInput,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group row justify-content-center align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"balance\",\n    class: \"col-md-2 col-form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 21\n    }\n  }, \"Balance\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"number\",\n    name: \"balance\",\n    id: \"balance\",\n    required: true,\n    class: \"col-md-4\",\n    value: customer.balance,\n    onChange: handleChangeInputNumber,\n    disabled: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group row justify-content-center align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"deposit\",\n    class: \"col-md-2 col-form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 21\n    }\n  }, \"Deposit\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"number\",\n    name: \"deposit\",\n    id: \"deposit\",\n    required: true,\n    class: \"col-md-4\",\n    value: customer.deposit,\n    onChange: handleChangeInputNumber,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group row justify-content-center align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"phone\",\n    class: \"col-md-2 col-form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 21\n    }\n  }, \"Phone\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"phone\",\n    id: \"phone\",\n    required: true,\n    class: \"col-md-4\",\n    value: customer.phone,\n    onChange: handleChangeInputData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"address1\",\n    class: \"col-md-2 col-form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 21\n    }\n  }, \"Address:1\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"address1\",\n    id: \"address1\",\n    class: \"col-md-4\",\n    value: customer.address1,\n    onChange: handleChangeInput,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"address2\",\n    class: \"col-md-2 col-form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 21\n    }\n  }, \"Address:2\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"address2\",\n    id: \"address2\",\n    class: \"col-md-4\",\n    value: customer.address2,\n    onChange: handleChangeInput,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"address3\",\n    class: \"col-md-2 col-form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 21\n    }\n  }, \"City\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"address3\",\n    id: \"address3\",\n    class: \"col-md-4\",\n    value: customer.address3,\n    onChange: handleChangeInput,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    class: \"btn btn-success\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 17\n    }\n  }, onEdit ? \"Update\" : \"Create\")), customer.length === 0 && /*#__PURE__*/React.createElement(Loading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 39\n    }\n  }), customer.length !== 0 && /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 39\n    }\n  }));\n}\n\nexport default Customer;","map":{"version":3,"sources":["E:/Academic/5th Sem/Project/RTS/client/src/components/mainpages/customer/Customer.js"],"names":["React","useContext","useState","useEffect","useParams","GlobalState","axios","Loading","Footer","initialState","Id","name","address1","address2","address3","phone","balance","deposit","Customer","params","state","customer","setCustomer","token","callback","setCallback","customerAPI","onEdit","setOnEdit","isAdmin","userAPI","loading","setLoading","getCustomer","res","get","headers","Authorization","data","console","log","handleChangeInputData","e","value","target","handleChangeInputNumber","parseInt","handleChangeInput","toLowerCase","handleSubmit","preventDefault","alert","put","msg","post","err","response","length"],"mappings":"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","sourcesContent":["import React, {useContext, useState, useEffect} from 'react'\r\nimport {useParams} from 'react-router-dom'\r\nimport {GlobalState} from '../../../GlobalState'\r\nimport axios from 'axios'\r\nimport Loading from '../utils/Loading/Loading'\r\nimport Footer from '../../footers/Footer'\r\nimport '../../../bootstrap.css'\r\n\r\nconst initialState = {\r\n    Id: '',\r\n    name: '',\r\n    address1: '',\r\n    address2: '',\r\n    address3: '',\r\n    phone: '',\r\n    balance: 0,\r\n    deposit: 0\r\n}\r\n\r\n\r\nfunction Customer() {\r\n    const params = useParams()\r\n    const state = useContext(GlobalState)\r\n    const [customer, setCustomer] = useState(initialState)\r\n    const [token] = state.token\r\n    const [callback, setCallback] = state.customerAPI.callback\r\n    const [onEdit, setOnEdit] = useState(false)\r\n    const [isAdmin] = state.userAPI.isAdmin\r\n    const [loading, setLoading] = useState(false)\r\n\r\n    useEffect(() => {\r\n        if(params.Id){\r\n            setOnEdit(true)\r\n            const getCustomer = async () =>{\r\n                const res = await axios.get(`/api/customer/${params.Id}`,{\r\n                    headers: {Authorization: token} \r\n                })\r\n                setCustomer(res.data)\r\n                console.log(res.data)\r\n            }\r\n            getCustomer()\r\n        }else{\r\n            setOnEdit(false)\r\n            setCustomer(initialState)\r\n        }\r\n    },[callback])\r\n\r\n    const handleChangeInputData = e =>{\r\n        const {name, value} = e.target\r\n        setCustomer({...customer, [name]: value})\r\n    }\r\n\r\n    const handleChangeInputNumber = e =>{\r\n        const {name, value} = e.target\r\n        setCustomer({...customer, [name]: parseInt(value)})\r\n    }\r\n\r\n    const handleChangeInput = e =>{\r\n        const {name, value} = e.target\r\n        setCustomer({...customer, [name]: value.toLowerCase()})\r\n    }\r\n\r\n    const handleSubmit = async e =>{\r\n        e.preventDefault()\r\n        try{\r\n            if(!isAdmin) return alert(\"You're not an admin!\")\r\n\r\n            if(onEdit){\r\n                const res = await axios.put(`/api/customer/update/${customer.Id}`,{...customer},{\r\n                    headers: {Authorization: token}\r\n                })\r\n                alert(res.data.msg)\r\n            }else{\r\n                const res = await axios.post(`/api/customer/register`,{...customer},{\r\n                    headers: {Authorization: token}\r\n                })\r\n                alert(res.data.msg)\r\n            }\r\n            setCallback(!callback)\r\n        }catch(err){\r\n            alert(err.response.data.msg)\r\n        }\r\n    }\r\n\r\n    if(loading) return <div><Loading /></div>\r\n    return (\r\n    \r\n        <div>\r\n            <form onSubmit={handleSubmit} className=\"container mt-5\">\r\n                <div className=\"form-group row justify-content-center align-items-center\">\r\n                    <label htmlFor=\"Id\" class=\"col-md-2 col-form-label\">User ID</label>\r\n                    <input type=\"text\" name=\"Id\" id=\"Id\" required class=\"col-md-4\"\r\n                    value={customer.Id} onChange={handleChangeInputData} disabled={onEdit} />\r\n                </div>\r\n\r\n                <div className=\"form-group row justify-content-center align-items-center\">\r\n                    <label htmlFor=\"name\" class=\"col-md-2 col-form-label\">Name</label>\r\n                    <input type=\"text\" name=\"name\" id=\"name\" required class=\"col-md-4\"\r\n                    value={customer.name} onChange={handleChangeInput} />\r\n                </div>\r\n\r\n                <div className=\"form-group row justify-content-center align-items-center\">\r\n                    <label htmlFor=\"balance\" class=\"col-md-2 col-form-label\">Balance</label>\r\n                    <input type=\"number\" name=\"balance\" id=\"balance\" required class=\"col-md-4\"\r\n                    value={customer.balance} onChange={handleChangeInputNumber} disabled={true} />\r\n                </div>\r\n\r\n                <div className=\"form-group row justify-content-center align-items-center\">\r\n                    <label htmlFor=\"deposit\" class=\"col-md-2 col-form-label\">Deposit</label>\r\n                    <input type=\"number\" name=\"deposit\" id=\"deposit\" required class=\"col-md-4\"\r\n                    value={customer.deposit} onChange={handleChangeInputNumber} />\r\n                </div>\r\n\r\n                <div className=\"form-group row justify-content-center align-items-center\">\r\n                    <label htmlFor=\"phone\" class=\"col-md-2 col-form-label\">Phone</label>\r\n                    <input type=\"text\" name=\"phone\" id=\"phone\" required class=\"col-md-4\"\r\n                    value={customer.phone} onChange={handleChangeInputData} />\r\n                </div>\r\n\r\n                <div className=\"form-group row\">\r\n                    <label htmlFor=\"address1\" class=\"col-md-2 col-form-label\">Address:1</label>\r\n                    <input type=\"text\" name=\"address1\" id=\"address1\"  class=\"col-md-4\"\r\n                    value={customer.address1} onChange={handleChangeInput} />\r\n                </div>\r\n\r\n                <div className=\"form-group row\">\r\n                    <label htmlFor=\"address2\" class=\"col-md-2 col-form-label\">Address:2</label>\r\n                    <input type=\"text\" name=\"address2\" id=\"address2\" class=\"col-md-4\"\r\n                    value={customer.address2} onChange={handleChangeInput} />\r\n                </div>\r\n\r\n                <div className=\"form-group row\">\r\n                    <label htmlFor=\"address3\" class=\"col-md-2 col-form-label\">City</label>\r\n                    <input type=\"text\" name=\"address3\" id=\"address3\" class=\"col-md-4\"\r\n                    value={customer.address3} onChange={handleChangeInput} />\r\n                </div>\r\n\r\n                <button class=\"btn btn-success\" type=\"submit\">{onEdit? \"Update\" : \"Create\"}</button>\r\n            </form>\r\n            {customer.length === 0 && <Loading />}\r\n            {customer.length !== 0 && <Footer />}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Customer\r\n"]},"metadata":{},"sourceType":"module"}